{"version":3,"file":"_page.c1284534.js","sources":["../../../../../../src/routes/portfolio/[slug]/+page.ts"],"sourcesContent":["import axios from 'axios';\n\nexport async function load(params) {\n    const url = 'https://strapi.ulfbuilt.com:1337/api/portfolios?filters[slug][$eq]='+params.params.slug+'&populate=deep,2';\n    const headers = {\n        Authorization: 'Bearer ec0d6b5aece1773cbd6e5f48756c70d9b0b3a59a4d1c325a2e699c1c1b1cae0980dc56aa2c3dfd565237b2a00db9a547a1a9e54a86f80697b31766e6bf80257b37760df84c70b534edeb4df0bdde9452777a52a757850d7a82c28dba854776c405f20ef3fbd95c72b759280f375f69191f2ca75d69600ea9584d8b2100309072' \n    }    \n    const response = await axios.get(url, { headers });\n\n\tlet randomCat = response.data.data[0].attributes.categories.data;\n\trandomCat = randomCat[Math.floor(Math.random() * randomCat.length ) ].id;\n\n    const rpUrl = 'https://strapi.ulfbuilt.com:1337/api/portfolios?filters[categories][id][$eq]='+randomCat+'&populate=deep,2';\n    const rData = await axios.get(rpUrl, { headers });\n    const rPortfolios = getRandomPortfolios(rData.data.data, 2);\n    console.log(rData.data.data.length);\n    const portfolio = response.data;\n    return {\n        portfolio,\n        rPortfolios\n    };\n\n    function getRandomPortfolios(arr, count) {\n        const shuffled = [...arr].sort(() => 0.5 - Math.random());\n        return shuffled.slice(0, count);\n    }\n}"],"names":["load","params","url","headers","response","axios","randomCat","rpUrl","rData","rPortfolios","getRandomPortfolios","arr","count"],"mappings":"wCAEA,eAAsBA,EAAKC,EAAQ,CAC/B,MAAMC,EAAM,sEAAsED,EAAO,OAAO,KAAK,mBAC/FE,EAAU,CACZ,cAAe,yQAAA,EAEbC,EAAW,MAAMC,EAAM,IAAIH,EAAK,CAAE,QAAAC,EAAS,EAEpD,IAAIG,EAAYF,EAAS,KAAK,KAAK,CAAC,EAAE,WAAW,WAAW,KAChDE,EAAAA,EAAU,KAAK,MAAM,KAAK,OAAW,EAAAA,EAAU,MAAO,CAAE,EAAE,GAE7D,MAAAC,EAAQ,gFAAgFD,EAAU,mBAClGE,EAAQ,MAAMH,EAAM,IAAIE,EAAO,CAAE,QAAAJ,EAAS,EAC1CM,EAAcC,EAAoBF,EAAM,KAAK,KAAM,CAAC,EAC1D,eAAQ,IAAIA,EAAM,KAAK,KAAK,MAAM,EAE3B,CACH,UAFcJ,EAAS,KAGvB,YAAAK,CAAA,EAGK,SAAAC,EAAoBC,EAAKC,EAAO,CAE9B,MADU,CAAC,GAAGD,CAAG,EAAE,KAAK,IAAM,GAAM,KAAK,OAAA,CAAQ,EACxC,MAAM,EAAGC,CAAK,CAClC,CACJ"}